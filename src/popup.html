<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>MetaCrypt</title>
  <style>
    body { width: 380px; padding: 20px; font-family: -apple-system, BlinkMacSystemFont, sans-serif; background:#fff; color:#1c1e21; margin:0; }
    h2 { margin:0 0 16px; text-align:center; font-size:18px; }
    .section { margin:18px 0; padding:16px; background:#f8f9fa; border-radius:12px; border:1px solid #e0e0e0; }
    label { font-weight:600; display:block; margin-bottom:8px; }
    textarea { width:100%; box-sizing:border-box; font-family:'SF Mono',monospace; resize:vertical; }
    button { padding:10px 16px; border:none; border-radius:8px; font-weight:600; cursor:pointer; transition:0.2s; }
    button:hover { opacity:0.9; }
    button:disabled { opacity:0.5; cursor:not-allowed; }
    .primary { background:#0066cc; color:white; width:100%; margin:12px 0; }
    .success,.error { padding:10px; border-radius:8px; margin:10px 0; font-weight:500; }
    .success { background:#d4edda; color:#155724; }
    .error { background:#f8d7da; color:#721c24; }
    .small { font-size:12px; color:#666; }
    #load-error { display:none; background:#ff4444; color:white; padding:12px; border-radius:8px; text-align:center; font-weight:bold; }
  </style>
</head>
<body>
  <h2>MetaCrypt v2.0.2</h2>

  <div id="load-error">
    OpenPGP library failed to load<br>
    <small>Check openpgp.min.js is in the extension root</small>
  </div>

  <div class="section">
    <label>Add Recipient Public Key</label>
    <textarea id="pubkey" placeholder="-----BEGIN PGP PUBLIC KEY BLOCK-----" maxlength="10000"></textarea>
    <button id="addPubKeyBtn" class="primary">Add Public Key</button>
  </div>

  <div class="section">
    <label>Your Private Key (stored locally)</label>
    <textarea id="privkey" placeholder="-----BEGIN PGP PRIVATE KEY BLOCK-----" maxlength="20000"></textarea>
    <button id="addPrivKeyBtn" class="primary">Import Private Key</button>
    <p class="small">Never leaves your browser</p>
  </div>

  <div class="section">
    <label>Message</label>
    <textarea id="message" placeholder="Type or paste armored text" maxlength="50000"></textarea>
    <button id="encryptBtn" class="primary">Encrypt Message</button>
    <button id="decryptBtn" class="primary">Decrypt Message</button>
  </div>

  <div class="section">
    <label>Secure File Transfer (hides filename)</label>
    <div id="drop-zone" class="drop-zone">
      <p>Drop file here or click<br><span class="small">Max 10 MB â€¢ original name hidden</span></p>
      <input type="file" id="file-input" style="display:none">
      <div id="file-name"></div>
    </div>
    <button id="encryptFileBtn" class="primary" disabled>Encrypt File (Armored Block)</button>
  </div>

  <div class="section">
    <label>Result</label>
    <textarea id="result" readonly placeholder="Output appears here"></textarea>
  </div>

  <div id="status"></div>

  <script src="openpgp.min.js"></script>
  <script src="popup.js"></script>
</body>
</html>